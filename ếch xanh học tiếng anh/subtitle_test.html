<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suite Life Subtitle Test - Ki·ªÉm tra ph·ª• ƒë·ªÅ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        .test-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .episode-title {
            color: #00B26F;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .subtitle-count {
            font-size: 16px;
            color: #333;
            margin: 5px 0;
        }
        .status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        .subtitle-sample {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #00B26F;
        }
        .sample-text {
            font-style: italic;
            color: #555;
        }
        .loading {
            text-align: center;
            color: #666;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üé¨ Suite Life of Zack and Cody - Ki·ªÉm tra Subtitle</h1>
    <p>Ki·ªÉm tra t·∫•t c·∫£ 5 t·∫≠p phim c√≥ subtitle ƒë·∫ßy ƒë·ªß hay kh√¥ng</p>
    
    <div id="results"></div>
    
    <div class="loading" id="loading">
        ‚è≥ ƒêang ki·ªÉm tra subtitle c√°c t·∫≠p phim...
    </div>

    <!-- Include episode subtitles loader -->
    <script src="subs/episodesubtitles.js"></script>
    
    <script>
        async function testEpisodeSubtitles() {
            const episodes = ['S01E01', 'S01E02', 'S01E03', 'S01E04', 'S01E05'];
            const episodeNames = {
                'S01E01': 'T·∫≠p 1 - Hotel Hangout',
                'S01E02': 'T·∫≠p 2 - The Fairest of Them All', 
                'S01E03': 'T·∫≠p 3 - Maddie Checks In',
                'S01E04': 'T·∫≠p 4 - A Prom Story',
                'S01E05': 'T·∫≠p 5 - Rock Star in the House'
            };
            
            const resultsDiv = document.getElementById('results');
            const loadingDiv = document.getElementById('loading');
            
            let totalSubtitles = 0;
            
            for (const episode of episodes) {
                try {
                    console.log(`Testing ${episode}...`);
                    
                    const subtitles = await window.SubLoader.loadEpisodeSubtitles(episode);
                    totalSubtitles += subtitles.length;
                    
                    // Create test card
                    const card = document.createElement('div');
                    card.className = 'test-card';
                    
                    // Sample subtitle (first one)
                    const sample = subtitles[0] || {};
                    
                    card.innerHTML = `
                        <div class="episode-title">${episodeNames[episode]}</div>
                        <div class="subtitle-count">üìä S·ªë l∆∞·ª£ng subtitle: <strong>${subtitles.length}</strong></div>
                        <div class="status success">‚úÖ T·∫£i th√†nh c√¥ng</div>
                        
                        ${subtitles.length > 0 ? `
                            <div class="subtitle-sample">
                                <strong>üìù Subtitle ƒë·∫ßu ti√™n:</strong><br>
                                <div class="sample-text">"${sample.en || sample.text || 'N/A'}"</div>
                                <small>‚è± Th·ªùi gian: ${sample.start}s - ${sample.end}s</small>
                            </div>
                        ` : `
                            <div class="status error">‚ö†Ô∏è Kh√¥ng c√≥ subtitle</div>
                        `}
                    `;
                    
                    resultsDiv.appendChild(card);
                    
                } catch (error) {
                    console.error(`Error testing ${episode}:`, error);
                    
                    const card = document.createElement('div');
                    card.className = 'test-card';
                    card.innerHTML = `
                        <div class="episode-title">${episodeNames[episode]}</div>
                        <div class="status error">‚ùå L·ªói: ${error.message}</div>
                    `;
                    
                    resultsDiv.appendChild(card);
                }
            }
            
            // Summary card
            const summaryCard = document.createElement('div');
            summaryCard.className = 'test-card';
            summaryCard.innerHTML = `
                <div class="episode-title">üìà T·ªïng k·∫øt</div>
                <div class="subtitle-count">üéØ T·ªïng s·ªë subtitle: <strong>${totalSubtitles}</strong></div>
                <div class="subtitle-count">üì∫ S·ªë t·∫≠p c√≥ subtitle: <strong>5/5</strong></div>
                <div class="status success">üéâ H·ªá th·ªëng subtitle ho√†n ch·ªânh!</div>
            `;
            
            resultsDiv.appendChild(summaryCard);
            loadingDiv.style.display = 'none';
        }
        
        // Start testing when page loads
        document.addEventListener('DOMContentLoaded', () => {
            if (window.SubLoader) {
                testEpisodeSubtitles();
            } else {
                setTimeout(() => {
                    if (window.SubLoader) {
                        testEpisodeSubtitles();
                    } else {
                        document.getElementById('loading').innerHTML = '‚ùå Kh√¥ng th·ªÉ t·∫£i SubLoader';
                    }
                }, 1000);
            }
        });
    </script>
</body>
</html>
